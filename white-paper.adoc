= Certified By GS1 - White Paper
Anna Klapper <anna.klapper@gs1.de>; Dr. Sebastian Schmittner <sebastian.schmittner@eecc.de>; Roman Winter <roman.winter@gs1.de>
v2.0.2 + {docdatetime}
:doctype: article
:homepage: https://github.com/gs1-germany-innolab/CertifiedByGS1-Konzepte
:toc: macro
:toclevels: 3
:toc-title: Inhalt
:figure-caption: Bild
:table-caption: Tabelle
:section-refsig: Abschnitt
:icons: font
:xrefstyle: short
:imagesdir: ./pics/
:sectnums:
:chapter-refsig: Abschnitt
:appendix-refsig: Anhang
:chapter-label: 


Ergebnisbericht des F&E Projekts _Certified by GS1_

Copyright 2020 GS1 Germany GmbH, European EPC Competence Center GmbH
(EECC)

Draft-Version: {revnumber}

Autoren: mailto:anna.klapper@gs1.de[Anna Klapper], mailto:sebastian.schmittner@eecc.de[Dr. Sebastian Schmittner], mailto:roman.winter@gs1.de[Roman Winter], mailto:mayra.castellanos@gs1.de[Mayra Castellanos]


:!sectnums:
[[sec_executive]]
== Management Summary

Soziale und geschäftliche Beziehungen sind zur Identifizierung und Authentifizierung anderer Parteien stark auf Identitätsnachweise angewiesen. Sie tragen dazu bei, die mit menschlichen Interaktionen verbundenen Risiken anzugehen und das Vertrauen zwischen den interagierenden Parteien zu stärken.

In der physischen Welt gibt es bereits seit Anfang des 19. Jahrhunderts Identitätssysteme wie Personalausweise. Im Zuge der Digitalisierung werden immer mehr soziale und wirtschaftliche Interaktionen von der physischen in die digitale Welt verlagert. Dabei ist die Fähigkeit, eine vertrauensvolle Beziehung zwischen den interagierenden Parteien im digitalen Raum aufzubauen, ein entscheidender Faktor, um Geschäfte zu ermöglichen. 

Folglich werden digitale Identitäten immer wichtiger. In ähnlicher Weise gewinnen digitale Identitäten nicht nur für die digitale, sondern auch für die physische Welt an Bedeutung, da sie bereits heute physische Ausweise wie Kunden- und Kreditkarten ersetzen. Darüber hinaus verschmilzt die digitale Welt mit dem Aufkommen des IoTs, zunehmend mit der physischen Welt. Dadurch erhöht sich die Anzahl der angeschlossenen Geräte sowie der digitalen Authentifizierungspunkte in der physischen Welt.

Da das Internet ohne eine standardisierte, explizite Möglichkeit zur Identifizierung von Personen oder Organisationen aufgebaut wurde, um den Anforderungen des Identitätsmanagements gerecht zu werden, sind eine Vielzahl von Lösungen entstanden. Dazu gehören benutzerdefiniertes Identitätsmanagement Implementierungen, die meist auf Benutzernamen und Passwörtern, Passwortmanagern und Identitätsidentifizierungsdiensten basieren.

Das Kerngeschäft von GS1 ist die Entwicklung von Standards, die Interoperabilität und Digitalisierung zwischen Unternehmen, Produkte und Dinge, ermöglichen. Der Bedarf an sicherem Identitätsmanagement und sicheren Infrastrukturen, insbesondere mit der schnellen Verbreitung des IoTs, war der Haupttreiber um das Projekt _Certified by GS1_ zu starten.

_Certified by GS1_ hat Konzepte entwickelt, um das bestehende System der GS1 Idente durch digitale Zertifikate abzusichern und automatisch authentifizierbar zu machen. Es wird aufgezeigt, wie die Stellung der GS1 als vertrauenswürdige und neutrale Organisation zum Identitätsanbieter und Vertrauensanker in einer digitalen Vertrauensinfrastruktur ausgebaut werden kann.

In bestimmten Anwendungsfällen, insbesondere im Machine-To-Machine (M2M) Bereich, ebenso aber auch in B2B und B2C Prozessen, wird eine weitgehende Automatisierung von Abläufen dadurch erschwert, manchmal auch verhindert, dass Kommunikationspartner nicht sicher automatisch authentifiziert werden können. Durch eine Erweiterung der bestehenden GS1 Identifikationsschlüssel um Sicherheits- und Authentifizierungsfunktionen, könnten _Certified by GS1_ Idente im IoT-Umfeld die unternehmensübergreifende eindeutige und sichere Identifikation von Maschinen untereinander sicherstellen. Für diese wichtige Voraussetzung eines Internet of Things ist bisher kein alternatives System etabliert.

Die _Certified by GS1_ Konzepte wurden durch Kundenumfragen und –interviews mit Partnern aus verschiedenen Branchen abgestimmt und unter Betrachtung von klassischen und modernen technologischen Umsetzungsmöglichkeiten digitaler Signaturen und Zertifikate erarbeitet. Insbesondere die Blockchain-basierte SSI (Self Sovereign Identity) Technologie, die sich aktuell rasant entwickelt und verbreitet, bietet eine historische Chance, Entwicklungen im Bereich digitaler Identitäten mitzugestalten. Im Rahmen von _Certified by GS1_ wurden nicht nur abstrakte Konzepte und Möglichkeiten zu deren konkreter technischer Umsetzung erarbeitet. In Zusammenarbeit mit externen Partnern wurden mehrere Use Cases ausformuliert, um die Vielzahl von Anwendungsmöglichkeiten des Konzeptes zu verdeutlichen.

Wenn Sie diese spannenden Themen gemeinsam mit uns weiter entwickeln möchten, wenden Sie sich gerne für Informationen zum aktuellen Stand an die Autoren!

<<<

toc::[]


:sectnums:
[[sec_intro]]
== Einführung

Im Rahmen des _Certified by GS1_ Projektes wurden verschiedene
Möglichkeiten der technischen Umsetzung authentifizierbarer
Identifikationsschlüssel entwickelt und untersucht. Die Grundlage
bildet die kryptografische digitale Signatur (siehe
<<sec_digi_sig>>). Mittels digitaler Signatur kann sicher gestellt
werden, dass Daten ab dem Zeitpunkt der Signatur unverändert sind und
vom angegebenen Urheber stammen. Eine essentielle *Voraussetzung*
hierfür ist einerseits eine vertrauenswürdige Identitätsinfrastruktur,
mit deren Hilfe die öffentlichen Schlüssel eindeutig den Urhebern
zugeordnet werden und andererseits, dass die privaten Schlüssel
sicher geheim gehalten werden.

Ein vertrauenswürdiger Teilnehmer, beispielsweise ein Unternehmen wie GS1, 
kann anderen Teilnehmern Zertifikate ausstellen (siehe <<sec_pki>> und <<sec_ssi>>).



In <<sec_intro>> erhalten Sie einen Überblick über wichtige
Begriffe und Hintergründe für das weitere Verständnis der im Projekt _Certified by
GS1_ entwickelten Konzepte, Praxisbeispiele und
Demonstrationen.
In <<sec_gs1_anchor>> werden die Konzepte für Identifikationsschlüssel
certified by GS1 entwickelt und insbesondere in <<sec_ssi_proto>> ein Self Sovreign Identity Protokoll
zur technischen Umsetzung der Konzepte dargestellt.
<<sec_use_cases>> bietet Einblicke in die
Anwendungsfälle, die im Rahmen des Projektes erarbeitet wurden und
<<sec_conclusion>> fasst schließlich die Ergebnisse kompakt zusammen
und gibt einen Ausblick auf die nächsten Schritte zur Realisierung der
hier vorgestellten Ideen.





=== Warum verlässliche Eindeutigkeit und ein Konzept wie _Certified by GS1_ wichtig sind?

Bei jeder Form der Kommunikation, sei es B2B oder B2C, Machine-to-Machine 
oder mit menschlicher Beteiligung, analog oder digital,
ist es essentiell zu wissen, wer mit wem spricht und über welche
Objekte. 
GS1 Germany, vormals CCG, ermöglicht seit 1974 die Vergabe von Identifikationsnummern um konkrete Dinge,
Orte, Handelspartner, uvm. eindeutig und unverwechselbar zu
identifizieren.  Während gängige Bezeichnungen, etwa die Abkürzung
"EECC", mehrdeutig oder dem Partner unbekannt sein können, sind GS1
Identifikationsnummern, wie die entsprechend zugeordnete (Party) GLN 4047111000006 eindeutig. Über
Services der GS1 wie <<gepir>> lässt sich zu einer unbekannten Identifikationsnummer z.B.
herausfinden, dass mit der eben genannten Abkürzung "EECC" die "European EPC Competence Center GmbH"
bezeichnet wird. 

Gibt sich einer der Kommunikationspartner mit der GLN als 4047111000006 aus, ist
also zumindest eindeutig, dass hiermit dieses konkrete Unternehmen gemeint
ist und nicht z.B. eine Person mit den Initialen "EECC". Die von GS1
vergebenen Identifikationsnummern ermöglichen also eine eindeutige
Zuordnung. Stand heute ist jedoch keine Authentifikation <<auth>>
dieser Daten möglich. Es kann nicht überprüft werden, ob der
Kommunikationspartner derjenige ist, der er zu sein vorgibt.  Ob es
sich aber bei einer Ziffernfolge um eine *legitime* GS1 Identifikationsnummer
oder nur eine Ziffernkombination im GS1-Format handelt, ist unter
Umständen nicht leicht herauszufinden. Dieses Problem und existierende
Lösungsansätze werden in <<sec_verified_by_gs1>> behandelt.

Im Projekt, das _Certified by GS1_ als Konzept entwickelt, wird untersucht, wie klassische und
moderne Konzepte aus dem Bereich der Digitalen Signatur und Digitaler
Zertifikate genutzt werden können, um die Authentizität von GS1 Identifikationsnummern und damit
zusammenhängenden Stammdaten beweisbar zu machen.  Außerdem ermöglichen
die hier vorgestellten Konzepte den mit den
Identifikationsnummern bezeichneten Firmen oder Dingen sich zweifelsfrei und
fälschungssicher auszuweisen und gesicherte Kommunikationskanäle untereinander aufzubauen.

Die _Certified by GS1_ Konzepte können so die Basis für eine
Vertrauensinfrastruktur (im Sinne einer PKI) schaffen, wie sie für das Internet
of Things (IoT) aber auch in klassischen B2B Prozessen wie z.B. dem Supplier
Onboarding (siehe <<sec_onboarding>>) dringend benötigt werden, um Digitalisierung
und Automatisierung nicht durch Sicherheits- und Vertrauensfragen zu behindern.
Für die Abgrenzung zu bestehenden Lösungen ohne Zertifikatsinfrastruktur aber mit ähnlicher Zielsetzung siehe <<sec_verified_by_gs1>>.


[[sec_usp]]
=== Warum setzt sich GS1 Germany für sichere digitale Zertifikate ein?

Sichere digitale Zertifikate sind ohne eine unabhängige Institution nicht zu ermöglichen.
GS1 ist eine etablierte Institution, deren Kerngeschäft u.a. in der
Vergabe von Nummernkreisen (Namensräumen) für Idente, insbesondere
Geschäfts- und Produktidentifikationsnummern besteht. In diesem Sinne
erfüllt GS1 bereits die Rolle eines "Identity Provider" <<idp>>. In
_Certified by GS1_ wurden Konzepte zur Vergabe von
Sicherheitsmerkmalen (Zertifikaten) zur Authentifizierung dieser
Identifikationsnummern entwickelt. Hierbei entsprechen die
entwickelten Zertifikatssysteme strukturell dem bestehenden
Vergabesystem für Identifikationsnummern.  In <<sec_gs1_ids>> wird
dieser Aspekt detaillierter erläutert.


GS1 vergibt (in der Regel) keine einzelnen Identifikationsnummern, sondern Kunden
erwerben das Recht, selbst eine bestimmte Menge von
Identifikationsnummern zu vergeben.
Dieses Sytem wird im Rahmen von _Certified by GS1_ auch für die 
Sicherheitsmerkmale und damit die authentifizierten Idente umgesetzt. Ein Kunde kann so die
bisherigen Prozesse zur Vergabe von Identen strukturell beibehalten
und um die Sicherheits- und Authentifizierungsfunktion für die selbst
erzeugten Idente erweitern.

[[Chain-EECC]]
.Die Vergabe von Zertifikaten im Rahmen von Certified by GS1 folgt der Logik bei der Vergabe der GS1 Idente, siehe <<pic_id_tree>>
image::Certificate-Chain-EECC.png[pdfwidth=75%,align="center"]


Im IoT benötigt jedes Gerät nicht nur ein serielles
Ident wie eine SGTIN oder GIAI, sondern auch die Möglichkeit sich
individuell gegenüber anderen Geräten zu authentifizieren und mit
diesen eine vertrauenswürdige und abhörsichere Verbindung aufzubauen. Hier
stellt die Möglichkeit, solche "Certified" Idente selbst erzeugen zu
können, einen großen Vorteil für den Hersteller dar, denn dieser Ansatz
ist mit geringerem Aufwand und Kosten verbunden als ein
System, bei dem jedes Ident und die zugehörigen Sicherheitsmerkmale
einzeln bei einer zentralen Plattform erworben werden müssen.


Als Not-For-Profit Standardisierungsorganisation, erfüllt GS1 die Aufgabe
globale Geschäftstandards zu entwickeln und zu pflegen. GS1 ist eine
neutrale und vertrauenswürdige Organisation. Als neutrale Plattform bringt GS1
jederzeit Partner und Konkurrenten zu gemeinsamen Projekten, insbesondere im Bereich der
Standardisierung, zusammen.
Dies prädestiniert GS1 auch zum Vertrauensanker einer digitalen Zertifikatsinfrastruktur, 
insbesondere wenn diese auf der Authentifizierung der
GS1-eigenen Idente beruht. 
Dieser sogenannte Vertrauensanker wird in Zusammenhang mit <<sec_gs1_anchor>> noch weiter verdeutlicht.

Des weiteren ist GS1 bereits heute in vielen Branchen Dreh- und
Angelpunkt für die mit den Identen assoziierten Stammdaten. Die
Authentifizierung dieser Stammdaten über digitale Signaturen, basierend
auf den Zertifikaten der "Certified"-Idente ermöglicht eine noch
größere Vielzahl von Anwendungsfällen, zusätzlich zur Authentifizierung
der Idente selbst. 





=== Grundlegende Begriffe und Konzepte

Eine umfassende und didaktisch ausgereifte Einführung aller für das
Verständnis der _Certified by GS1_ nötigen Grundlagen ist jenseits der
Zielsetzung und des Umfangs dieser Ausarbeitung. Nichtsdestotrotz werden im
folgenden Abschnitt einige grundlegende Begriffe aus der Welt der GS1
Idente sowie der digitalen Zertifikate eingeführt, um
Missverständnisse bei den verwendeten Begriffen zu vermeiden. Verweise
auf weiterführende Literatur ermöglichen den Einstieg in
unbekannte Themen.

[[sec_gs1_ids]]
==== GS1 Idente

Kerndienstleistung von GS1 ist es, seinen Kunden einen Nummernkreis zuzuteilen,
in welchem dieser GTINs (Global Trade Item Number) und andere Idente vergeben kann. 

GS1 Idente sind wie folgt aufgebaut (siehe <<pic_id_tree>>): Ausgehend von der Gesamtheit der GS1
Organisationen und GS1 Global Office erhalten die einzelnen Mitgliedsorganisationen
(MOs) Nummernkreise, indem ein bestimmter Präfix einer MO zugeordnet wird. 
Beispielsweise sind alle GS1 Idente deren erste drei Ziffern im Bereich 400 bis 440 liegen
GS1 Germany zugeordnet <<gs1-prefix>>. 
Innerhalb des eigenen Nummernkreises (d.h. beginnend
mit der eigenen GS1 Präfix) vergeben die MOs an Firmenkunden einen GS1 Company Prefix (GCP) und
damit den Kreis der Nummern beginnend mit ebendiesem. Zur Verdeutlichung: alle
GS1 Idente beginnend mit 4047111 sind als Nummernkreis dem EECC zugeordnet. 
Die Firmen können nun entsprechend der Spezifikationen für GS1 Idente eigenständig Identifikationsnummern
für z.B. Warenkategorien oder individuelle Waren, aber auch für Standorte, Warensendungen, Coupons, uvm.
(siehe <<gen-spec>>) vergeben. 
Beispielsweise bezeichnet die GLN (Global Location Number) 4047111000006
den Unternehmenshauptsitz des EECC. Hier steht entsprechend wieder das gleiche GCP
am Anfang der Nummer, gefolgt vom frei verfügbaren Namensraum und beendet mit einer Prüfziffer.

Die Art des Idents wird über den sogenannten Application Identifier
(AI) kodiert, z.B. 414 für die GLN. Entsprechend stellt (414) 4047111000006 (254) 01 
ein Beispiel für eine GLN (414) mit Erweiterungskomponente (254) dar, mit der das EECC einen spezifischeren Ort, etwa den
Posteingang des Hauptsitzes, bezeichnen könnte. Eine sog. Party GLN
kann Parteien wie juristische Personen (Firmen) aber auch Funktionen oder
Rollen, wie Abteilungen oder Ämter, identifizieren. 


[[GLN_Aufbau]]
.Aufbau einer GLN aus Basisnummer (GCP), Individueller Nummernteil und Prüfziffer
image::example-gln.png[]

Diese Baumstruktur aus
viele-zu-einem Zuordnungen, sprich von serialisierten Identen zu Klassenidenten zu
Companies zu MOs, existiert in entsprechender Form (teilweise ohne die Klassenebene) 
für alle GS1 Idente und ist in <<pic_id_tree>> schematisch
dargestellt. 
Dies stellt einen wichtigen Unterschied zu Systemen dar, in denen
nur einzelne Idente vergeben werden, da GS1 Kunden,
je nach Leistungsmodell, die Möglichkeit erhalten, selbst als intermediäre Vergabestelle eigene Idente zu
vergeben.  Die über die GCP festgelegten Nummernkreise stellen zudem
sicher, dass jede Nummer nur einmal vergeben werden kann, solange der
Kunde gemäß den Regeln des GS1 Systems nicht eigene Nummern mehrfach
vergibt. Die GS1 Idente sind daher weltweit überschneidungsfrei. Damit
ist grundsätzlich eine eindeutige Zuordnung aller Idente möglich.


[[pic_id_tree]]
.Hierarchie der Nummernkreise der GS1 am Beispiel der GCP des EECC
image::GS1-ID-Tree.png[]




Eine Authentifikation der Idente durch GS1 ist bisher nicht allgemein
gegeben. Der Antragsteller ist verpflichtet auf den Vertragsunterlagen wahrheitsgemäße Angaben zu tätigen.
Daher erfolgt eine besondere Identitätsprüfung der Antragsteller für GS1
Complete aktuell in der Regel nicht explizit. 
Es wäre demnach theoretisch möglich, dass jemand illegitim im Namen des EECC 
eine weitere GCP mit den original Firmendaten beantragt. Dadurch könnte dem EECC zwar
ohne dessen Kenntnis ein weiterer Nummernkreis zugeordnet werden, der jedoch nur bestehen bleibt, wenn das EECC
die ebenfalls zugesandte Rechnung begleicht. In der Realität ein nicht sinnvolles und bisher nicht eingetretenes Szenario. 
Dies würde sich grundlegend ändern, wenn
beim Antrag ein neues Authentifizierungsmerkmal, z.B. ein öffentlicher
Schlüssel, registriert wird. Nun wird es wichtig, die Legitimität des
Antrages bzw. die Berechtigung des Antragstellers zu überprüfen, um
zu verhindern, dass künftig ein Unberechtigter mit Hilfe des neu
registrierten Merkmals im Namen der Firma handeln kann.

Ein Missbrauch einzelner Idente erfolgt dagegen durchaus aktuell in
einigen Fällen z.B. hinsichtlich GTINs. Unternehmen, die keine GS1
Kunden sind, geben Nummernkombinationen entsprechend dem GS1
Nummernsystem als eigene GTINs aus, um Produkte online anbieten zu können.  
Dieser GTIN-Missbrauch wird durch GS1 Mitarbeiter verfolgt und
unterbunden. Eine teil-automatisierte Lösung, die in diesem Bereich
entwickelt wird, ist der Service „Verified by GS1“, welcher in
<<sec_verified_by_gs1>> zusammen mit der Problemstellung genauer
beleuchtet wird. Hier können Online-Portale und Händler GTINs auf ihre
Echtheit und Herkunft überprüfen, die im Vorfeld durch die Hersteller
in die GS1 Registry eingepflegt wurden.



[[sec_symm]]
==== Symmetrische Verschlüsselung

[[pic_symmetric]]
.Symmetrische Verschlüsselung verwendet *den gleichen Schlüssel* zum ver- und entschlüsseln. (Die Abbildung stammt aus einer Vorlesung der TU Darmstadt.)
image::symmetric.png[pdfwidth=75%,align="center"]

Kryptografische Systeme kann man in zwei unterschiedliche
Hauptbereiche einteilen: symmetrische und asymmetrische Kryptographie.
Die konzeptionelle Funktionsweise der symmetrischen Verschlüsselung
ist recht einfach. Es gibt nur einen Schlüssel. Dieser stellt ein nur
den Kommunikationspartnern bekanntes Geheimnis dar und wird für die Ver- wie auch für die Entschlüsselung
genutzt. Sowohl der Sender, als auch der
Empfänger benötigen denselben Schlüssel.

In einer Situation, in der ein Sender einem Empfänger eine geheime
Nachricht schicken möchte, ohne dass die beiden über ein als Schlüssel
verwendbares geteiltes Geheimnis verfügen, ist symmetrische
Kryptographie prinzipiell nicht hilfreich. Einen Schlüssel sicher
(d.h. geheim) zu übertragen, stellt das gleiche Problem dar
wie die Übertragung der geheimen Nachricht selbst.

Da bei modernen symmetrischen Verschlüsselungsalgorithmen der
Schlüssel deutlich kürzer sein kann als die Nachricht, nutzen moderne
Protokolle wie TLS <<tls>> häufig ein rechenzeitintensives
asymmetrisches verfahren, um einen temporären symmetrischen Schlüssel
auszuhandeln. Danach wird ein deutlich effizienteres symmetrisches
Verfahren angewendet, um die eigentliche Kommunikation zu verschlüsseln.

Auch wenn Sender und Empfänger dieselbe Person sind, etwa bei der
Verschlüsselung von (Teilen der) Festplatte, kommen moderne
symmetrische Verschlüsselungsverfahren zum Einsatz.


[[sec_asymm]]
==== Asymmetrische Verschlüsselung

[[pic_asymmetric]]
.Bei der asymmetrischen Verschlüsselung kommen *verschiedene* Schlüssel zum ver- und entschlüsseln zum Einsatz. (Die Abbildung stammt aus einer Vorlesung der TU Darmstadt.)
image::asymmetric.png[pdfwidth=75%,align="center"]

Bei der asymmetrischen Verschlüsselung werden zwei verschiedene aber
zusammenpassende Schlüssel zum Ver- und Entschlüsseln der Daten
verwendet.  Der zur Verschlüsselung verwendete Schlüssel wird in einem
asymmetrischen Verfahren als öffentlich bezeichnet, da dieser keine
Rückschlüsse auf den privaten Schlüssel zulässt. Der für die
Entschlüsselung verwendete private Schlüssel muss natürlich geheim
gehalten werden, um unerwünschtes lesen der Daten zu verhindern.

Die Funktionsweise einer asymmetrischen Verschlüsselung lässt sich wie
folgt erklären: Jeder Teilnehmer erzeugt ein Schlüsselpaar aus
privatem und öffentlichem Schlüssel für sich selbst.
Wenn ein Versender eine geheime
Nachricht an einen Empfänger versenden möchte, so benötigt er den
öffentlichen Schlüssel des Empfängers. Diesen bekommt er vom Empfänger
selbst oder aus einem öffentlichen Schlüsselverzeichnis. Der Versender
verschlüsselt die Nachricht mit dem öffentlichen Schlüssel und einer
Verschlüsselungsfunktion. Die verschlüsselte Nachricht kann danach an
den Empfänger versendet werden. Dieser benutzt die
Entschlüsselungsfunktion mit Hilfe seines privaten Schlüssels, um die
ursprüngliche Nachricht wiederherzustellen.

Das in <<sec_symm>> erwähnte Problem des Schlüsselaustausches wird also
deutlich erleichtert, da der öffentliche Schlüssel nicht geheim
gehalten werden muss. Es bleibt jedoch die Gefahr eines so genannten
Man-in-the-middle-Angriffs, der in <<sec_mitm>> erläutert wird.


[[sec_mitm]]
==== Man in the Middle

Bei dem Man-in-the-middle-Angriff versendet eine dritte Person seinen
öffentlichen Schlüssel unter falschem Namen.
Will etwa Alice an Bob eine verschlüsselte Nachricht schreiben und
fragt zu diesem Zweck bei einem Schlüsselverzeichnis-Server Bobs öffentlichen
Schlüssel an, so könnte Eve ihren eigenen öffentlichen Schlüssel unter
Bobs Namen dort hinterlegt haben.

Alice verschlüsselt ihre Nachricht in diesem Fall so, dass nur Eve sie
entschlüsseln kann. Damit der Angriff nicht auffällt wird Eve die
Nachricht nach der Entschlüsselung wieder verschlüsseln, diesmal mit
Bobs echtem Schlüssel und an Bob weiterleiten. So hat Eve unbemerkt
die geheime Nachricht gelesen und sogar die Möglichkeit, diese zu
verändern. Die Relais-Rolle des Angreifers ist namensgebend.

Um einen solchen Angriff auszuschließen wird eine vertrauenswürdige
Identitätsinfrastruktur benötigt, mit deren Hilfe Bob und Alice ihre
Identitäten und die zugehörigen öffentlichen Schlüssel sicher
austauschen können.



[[sec_digi_sig]]
==== Digitale Signatur

Bei der digitalen Signatur wird mit dem privaten Schlüssel und einem
"Original" Dokument eine "Unterschrift" hinzugefügt. Um Verwechslungen
mit z.B. einer eingescannten handschriftlichen Unterschrift zu
vermeiden, wird im folgenden der Begriff "Signatur" für diese digitale
Signatur verwendet, auch wenn diese konzeptionell oder sogar juristisch die
Funktion einer Unterschrift erfüllt.

Mithilfe des öffentlichen Schlüssels kann der Empfänger von Dokument und Signatur
feststellen, ob das Dokument wirklich mit dem zum öffentlichen
Schlüssel passenden privaten Schlüssel signiert wurde und ob das
Dokument unverändert vorliegt oder manipuliert wurde.
Steht die in <<sec_mitm>> erwähnte vertrauenswürdige
Identitätsinfrastruktur zur Verfügung, damit der Empfänger sicher sein
kann den richtigen öffentlichen Schlüssel des Absenders zu kennen, so
kann mit der digitalen Signatur sichergestellt werden, dass eine
Nachricht wirklich vom vorgeblichen Absender stammt.
Somit lässt sich die Identität des Unterzeichners zweifelsfrei
nachweisen und außerdem die Integrität der elektronischen Nachricht
sicherstellen.

Für nähere Details zur Funktionsweise von Signaturalgorithmen wird auf
die Literatur verwiesen <<sign>>.



[[sec_certs]]
==== Digitale Zertifikate

Zertifikate sind unterschriebene Dokumente, in denen eine Zuordnung eines
öffentlichen Schlüssels zu einem anderen Teilnehmer bescheinigt
wird. Je nach konkretem Format können auch weitere Details im
Zertifikat eingetragen und damit beglaubigt werden.

Unter einem "Zertifikat" im klassischen Sinne versteht man eine Bescheinigung
oder Urkunde, die bestimmte Informationen zu einem Unternehmen,
einer Person oder Sache "zertifiziert". Ein Zertifikat hat immer einen
Aussteller, der mit einer klassischen Unterschrift, Stempel, Siegel
oder ähnlichem bestätigt, dass er die zertifizierten Informationen
überprüft hat und deren Korrektheit bestätigt.
Zum Beispiel vergibt GS1 in gedruckter Form ein Zertifkat
für die Teilnahme am globalen GS1 System. In diesem Zertifkat wird
unter anderem die GLN und die dazugehörige Firma aufgeführt.


Diese Eigenschaften des analogen Zertifikates werden mit dem digitalen
Zertifikat nicht nur digitalisiert, sondern  mittels einer digitalen
Signatur (siehe <<sec_digi_sig>>) wird zusätzlich die Echtheit des Zertifikats
kryptografisch abgesichert. Ein digitales Zertifikat ist damit
deutlich schwerer zu fälschen als ein analoges. Voraussetzung ist, dass die
Signatur auf einer hinreichend sicheren Vertrauensinfrastruktur
für die Verwaltung der öffentlichen Schlüssel beruht und die Teilnehmer
in der Lage sind, ihre privaten Schlüssel geheim zu halten.

Konkret werden digitale Zertifikate verwendet, um bestimmte
Eigenschaften zu einem Objekt oder zu einer Person zu bestätigen. Ein
besonders wichtiges Zertifikat im Rahmen einer Vertrauensinfrastruktur
ist die Bescheinigung, dass ein gewisser öffentlicher Schlüssel einem
bestimmten Besitzer gehört.

Im Beispiel aus <<sec_mitm>> kann Alice darauf vertrauen, dass ein
öffentlicher Schlüssel wirklich Bob gehört und nicht von Eve
untergeschoben wurde, wenn ein vertrauenswürdiger Dritter dies
zertifiziert. Konkret stellt ein entsprechender
vertrauenswürdiger Dienstleister ein Zertifikat aus, in dem
bescheinigt wird, dass Bobs öffentlicher Schlüssel in der Tat Bob
gehört. Der Dienstleister überprüft hierzu, dass Bob tatsächlich
den passenden privaten Schlüssel besitzt und wirklich
die Person ist, die er vorgibt zu sein.
Solche Dienstleister werden auch als *Identitity Provider* (IDP)
bezeichnet und spielen in den Vertrauensinfrastrukturen, die in den
folgenden Abschnitten erläutert werden, eine wichtige Rolle.


Zertifikate werden weiterhin genutzt, um z.B.:

- Identitäten von Servern zu bescheinigen, um auf dieser
  Vertrauensbasis mittels <<tls>> den Datenverkehr im Internet zu
  verschlüsseln oder VPN Verbindungen aufzubauen

- zu bescheinigen, dass Software, Updates oder digitale Dokumente vom
  vorgeblichen Urheber stammen

- Personenidentitäten zu bescheinigen, um, wie im Beispiel mit Alice
  und Bob, eine direkte Mensch-zu-Mensch Kommunikation abzusichern,
  z.B. via e-Mail oder Messenger
  


Jede technische Implementierung einer Vertrauensinfrastruktur
definiert typischerweise einen Standard für das Datenformat ihrer
Zertifikate. Häufig verwendete Formate für Zertifikate sind (in historischer
Reihenfolge):

- X.509 Zertifikat <<x509>>
- PGP Zertifikat <<pgp-cert>>
- Verifiable Credentials <<vc-data-model>>


[[sec_pki]]
==== Vertrauensinfrastruktur

[[pic_pki]]
.Die drei wesentlichen Funktionseinheiten einer PKI Infrastruktur: DIe Registrierungsstelle prüft die legitimität des Antrags, die Zertifizierungsstelle verwahrt den eigenen Schlüssel hoch sicher und signiert damit die ausgestellten Zertifikate und der Verzeichnisdienst veröffentlicht Zertifikate und verwaltet die Rückruflisten. (Die Abbildung stammt aus einer Vorlesung der TU Darmstadt.)
image::pki.png[pdfwidth=75%,align="center"]

Die in <<sec_asymm>> und <<sec_certs>> beschriebenen öffentlichen
Schlüssel und entsprechende Zertifikate bilden die Grundlage für den
Aufbau einer "Public Key Infrastructure" (PKI).
Wie in <<Chain-EECC>> dargestellt kann prinzipiell jeder vertrauenswürdige
Teilnehmer den Kreis der ebenso vertrauenswürdigen Teilnehmer an der
Vertrauensinfrastruktur erweitern, indem ersterer dem neuen Teilnehmer ein entsprechendes Zertifikat
ausstellt.

Bei der klassischen, d.h. weitgehend zentralen, 
Schlüssel- und Zertifikate Infrastruktur, die
z.B. bei der Absicherung der Kommunikation über das Internet mittels
Transportverschlüsselung <<tls>> zum Einsatz kommt, stellen eine oder einige
wenige zentrale Autoritäten, denen initial vertraut wird, Zertifikate
an zwischengeschaltete Autoritäten aus. So ergeben sich baumartige Vertrauensstrukturen.



In der PKI gibt es drei wesentliche Funktionen: eine Registrierungsstelle,
eine Zertifizierungsstelle und den Verzeichnisdienst. 

Die *Registrierungsstelle* erfasst und überprüft die Identität und
ggfs. weitere Angaben des Antragstellers. Diese muss davon überzeugt
sein, dass die persönlichen Daten und der i.d.R. vom Antragssteller
bereitgestellte öffentliche Schlüssel auch wirklich zum Antragsteller
gehören, bevor das Zertifikat ausgestellt wird. Nach einer positiven
Überprüfung, wird der Zertifikatsantrag durch die Registrierungsstelle
genehmigt und die Anfrage an die Zertifizierungsstelle weitergegeben.
Die Sicherheit der künftigen Authentifikationsfunktion des
öffentlichen Schlüssels hängt entscheidend von der sicheren
Überprüfung der Legitimität des Antrags bei der Registrierungsstelle
ab.

Wird mit einem digitalen Zertifikat die Zugehörigkeit eines
öffentlichen Schlüssels zu einer konkreten Person bescheinigt, so
erhält die Person damit ein neues Authentifizierungsmerkmal, d.h. eine
neue Möglichkeit um sich (digital) auszuweisen. Dies entspricht dem
Vorgang, bei dem eine natürliche Person beim Einwohnermeldeamt
vorspricht und ein Foto für einen neuen Personalausweis selbst
mitbringt, siehe <<physical-id>>. Ist der Personalausweis mit diesem
Foto ausgestellt, so kann die Person anhand des Fotos im Ausweis visuell
identifiziert werden.
Die Überprüfung, dass an dieser Stelle kein Unberechtigter eine
falsches Authentifizierungsmerkmal einbringen kann, etwa einen public key oder ein
Foto, was nicht zur identifizierten Person gehört, ist essentiell für
die Sicherheit der Vertrauensinfrastruktur.

Die *Zertifizierungsstelle* (Certificate Authority, CA, siehe auch <<ca>>)
wiederum integriert die Daten und den öffentlichen Schlüssel des Antragsstellers
in ein Zertifikat, d.h. ein digitales Dokument im entsprechenden Format
(klassisch X.509) wird erstellt und von der CA signiert. Zusätzlich kann die
Zertifizierungsstelle die Zertifikate zur Veröffentlichung in einem öffentlichen
Verzeichnis ablegen.

Oftmals befinden sich die Registrierungsstelle und die Zertifizierungsstelle in
einem Unternehmen und bilden eine Einheit, als Trust Center.

Der *Verzeichnisdienst* stellt eine Art öffentliches Adressbuch dar, in dem alle
öffentlichen Schlüssel und vor allem die ausgestellten Zertifikate zum Abruf bereit stehen. Eine weitere wichtige
Funktion ist das Bereitstellen von sogenannten Revocation Lists, in denen
veröffentlicht wird welche Zertifikate schon vor ihrem regulären Ablaufdatum
ungültig geworden sind. Dies geschieht etwa weil eingetragene Daten nicht mehr aktuell sind
oder weil, im schlimmsten Fall, der private Schlüssel nicht mehr als sicher
angesehen werden kann, etwa nach einem Cyber Angriff.


=== SSI als Dezentrale Zertifikate- und Schlüsselinfrastruktur

In einem dezentralen Identitätsmanagementsystem können die Entitäten
(Personen, Organisationen, Dinge, etc.) die Vertrauensanker für den
jeweiligen Anwendungsfall frei wählen.  Global verteilte Ledger
(DLTs), dezentrale P2P-Netzwerke oder andere Systeme mit gleichartigen
Fähigkeiten ermöglichen eine solche Vertrauensinfrastruktur ohne
zentrale Autoritätsinstanzen oder Single Points of Failure, etwa im
Verzeichnisdienst.  Dezentralisierte Identitätsmanagementsysteme
ermöglichen beliebigen Entitäten ihre eigenen Idente und verteilte
Vertrauensanker zu erstellen und zu verwalten.  Dieses Design beseitigt
sowohl die Abhängigkeit von zentralisierten Registrierungsstellen für
Identifikationsschlüssel als auch für Zertifikate (siehe
<<sec_pki>>). Typischerweise kann hier jede Entität als ihre eigene
Root of Trust fungieren. Diese Architektur wird als DPKI
(dezentralisierte PKI) bezeichnet.

==== Web of Trust

[[pic_wot]]
.Web of Trust: Direktes Vertrauen zwischen den Beteiligten kann indirekt übertragen werden um ein dezentrales Vertrauensnetzwerk zu erzeugen. Abbildung von https://en.wikipedia.org/wiki/File:Web_of_Trust-en.svg[Wikipedia].
image::WOT.png[pdfwidth=75%,align="center"]

Seit den frühen 90er Jahren kam mit der Entwicklung von PGP (Pretty
Good Privacy) und den freien Varianten OpenPGP und GPG (Gnu Privacy
Guard) ein neues Konzept einer Vertrauensinfrastruktur auf, welches
nicht mehr hierarchisch organisiert ist, sondern komplett dezentral.
Die
Grundidee des Web of Trust ist, dass sich einzelne Parteien direkt
gegenseitig vertrauen und z.B. nach Überprüfung der Personalausweise
bei einem persönlichen Treffen gegenseitig entsprechende Zertifikate
ausstellen und veröffentlichen. Vertrauen kann dann ähnlich wie in der
realen Welt über direkte und indirekte Kontakte aufgebaut
werden.

Zum Beispiel kann Ingo (siehe <<pic_wot>>) einen nicht direkt von ihm zertifizierten
(d.h. nicht bekannten) öffentlichen Schlüssel von Susi als
vertrauenswürdig einstufen, wenn es eine Zertifikatskette aus gehend
von ihm selbst aus gibt, die Susis Schlüssel als vertrauenswürdig
zertifiziert.
Über die genauen Parameter können Teilnehmer im Web of Trust
gemäß ihrer individuellen Anforderungen eine striktere oder weniger
restriktive Vererbung von Vertrauen jeweils individuell
konfigurieren. In <<pic_wot>> wird die einfachste Form von
Vertrauensübertrag über beliebig wenige/lange Pfade dargestellt, es
ist aber möglich (und gängig) zu fordern, dass es mehrere unabhängige
Zertifikatsketten zum Ziel gibt und diese nicht zu lang sind.


Im Bereich der e-Mail Signatur ist PGP eine Alternative zu
S/MIME, das auf, in der Regel kostenpflichtigen oder
unternehmensinternen, X.509 Zertifikaten von zentralen
Vertrauensanbietern beruht. Aufgrund mangelnder Unterstützung des
PGP Standards durch die Anbieter der relevanten e-Mail-Clients, vor allem
Outlook, kam es allerdings nie zu einer flächendeckenden Verbreitung.

Die Grundidee, dass prinzipiell alle Identitäten innerhalb einer
Vertrauensinfrastruktur als Intermediäre eigene Zertifikate ausstellen
können, wird im Rahmen von SSI aufgegriffen und mit modernen
technischen Möglichkeiten weiterentwickelt.


[[sec_ssi]]
==== SSI

Namensgebend für den Ansatz der Self Sovereign Identity (SSI) war die Motivation,
natürlichen Personen die Kontrolle über ihre eigene digitale Identität
zurückzugeben, anstatt die personenbezogenen Daten und Single Sign On-Dienste 
unter zentraler Kontrolle weniger großer Plattformen
amerikanischer Unternehmen nutzen zu müssen. Personenidentifikation und die Ausstellung und Verwaltung
vertrauenswürdiger Fakten (sog. _Credentials_, siehe <<sec_vc>>) zu diesen Personen
bilden den Kern vieler SSI Anwendungsfälle. Die SSI Infrastruktur eignet sich jedoch auch,
um die klassischen Probleme der Identifikation über Zertifikate und der Schlüsselverwaltung in
neuartiger dezentraler Weise zu lösen, unabhängig davon auf welche
Entitäten sich die Idente beziehen.

In einer SSI-basierten Vertrauensinfrastruktur hat der Verwalter einer
Identität die volle Kontrolle über die Leseberechtigungen an allen
Daten zu seiner Identität. Der Verwalter muss hierbei nicht
notwendigerweise das "Subjekt" sein, d.h. die Entität die
identifiziert wird, siehe <<sec_did>>.
Als Verzeichnisdienst (siehe <<sec_pki>>) kann in SSI Netzwerken eine
Block Chain (Distributed Ledger) eingesetzt werden. Dies ist
allerdings nach den entsprechenden Standards des W3C kein
Wesensmerkmal der SSI Technologie.


Entwicklung und Aufbau einer dezentralisierten Public Key
Infrastructure (DPKI) auf SSI Basis sind momentan in vollem Gange. SSI-basierte 
dezentrale PKI könnte eine ebenso große Bedeutung für die
globale Sicherheit und den Datenschutz im virtuellen Raum erlangen,
wie es einst die Entwicklung zentraler PKI für den verschlüsselten
Netzwerkverkehr über das SSL/TLS-Protokolls [tls] hatte.

[[sec_did]]
==== Decentralized Identifiers (DIDs)

Decentralized Identifiers (DIDs) sind Idente, die, wie der Name
bereits andeutet, nicht zentral vergeben werden, sondern von jedem
Teilnehmer an einer entsprechenden Infrastruktur selbst erzeugt werden
können.  DIDs können Personen, Organisationen, Dinge, Datenmodelle,
oder abstrakte Entitäten identifizieren, wobei die mit der DID
identifizierte Entität als _Subjekt_ der DID bezeichnet wird.  Die
Kontrolle über eine DID kann von einem Verwalter ausgeübt werden,
z.B. von einem entsprechend befugten Mitarbeiter, falls das Subjekt
eine juristische Person ist, oder dem Hersteller, falls das Subjekt
ein Ding oder Konzept ist.

Technisch betrachtet ist eine DID eine URN, die neben dem Schema "did"
und der eindeutigen Identifikationsnummer auch eine Referenz auf die
zugrundeliegende konkrete Vertrauensinfrastruktur enthält, im Rahmen
derer die DID erstellt wurde und genutzt werden kann. Beispielsweise
bezeichnet die DID `did:idu:HX74LKTfWUxnnUAE935u1P` die Identität von
GS1 Germany als Steward im ID-Union (Test-)Netzwerk von SSI für
Deutschland. Hier bezeichnet "idu" die sog. DID-Methode mit deren
Kenntnis das zur DID zugehörige DID-Dokument aus dem entsprechenden
Verzeichnis abgerufen werden kann.

Im DID-Dokument sind Datensätze zum Subjekt enthalten, insbesondere
Methoden, mit denen das Subjekt sich als DID Inhaber authentifizieren
kann. In der Regel sind dies Public Keys, möglich sind aber auch
z.B. pseudonymisierte Biometriedaten. Darüber hinaus können
Service-Endpunkte im DID-Dokument definiert werden, die eine
gesicherte Interaktion mit dem DID-Subjekt ermöglichen.

DIDs stellen die Kernkomponente einer gänzlich neuen Ebene von
dezentralisierter digitaler Identität im Rahmen einer neuen Public Key
Infrastructure dar. 

[[sec_vc]]
==== Verifiable Credentials

Die im Rahmen von SSI Vertrauensinfrastruktren ausgestellten
Zertifikate werden als Verifiable Credentials <<vc-data-model>> bezeichnet und über
einen speziellen Service-Endpunkt, der innerhalb eines DID-Dokuments
definiert werden kann, im Netzwerk zur Verfügung gestellt.

Im Unterschied zu klassischen Zertifikaten (insbesondere X.509) ist
das Schema, d.h. das Datenmodell, dieser Zertifikate sehr
flexibel. Die Veröffentlichung der Schemata ist eine zusätzliche
Aufgabe des Verzeichnisdienstes (Distributed Ledger) in SSI
Netzwerken. 



[[sec_compare]]
==== Vergleiche mit anderen Identifikationsschemata

DIDs vereinen wichtige Eigenschaften anderer Identifikationsschlüssel.
Neben der globalen Eindeutigkeit sind das insbesondere 

- dezentrale Vergabe (d.h. jeder Teilnehmer kann DIDs erzeugen) 
- Persistenz und
- globale Auflösbarkeit (d.h. im Rahmen der SSI Infrastruktur kann das
DID-Dokument und über die darin definierten Endpunkte weitere Daten,
insbesondere Verifiable Credentials, abgerufen werden).


Der Bedarf an global eindeutigen Identen, welche keine
zentralisierten Registrierungsstelle benötigen, führte bereits in den
1980er Jahren zur Entwicklung und Standardisierung der
Universally Unique Identifiers (UUIDs, seltener auch Globally Unique
Identifiers GUIDs genannt), siehe <<rfc-4122>>. UUIDs fehlt jedoch
eine globale Semantik, d.h. eine UUID trägt keinerlei Informationen
darüber, von wem/in welchem Rahmen oder zur Bezeichnung von was
sie erstellt wurde oder wo nähere Informationen abrufbar sind.

Im Unterschied zu etablierten Identifikationssystemen wie dem GS1 System 
bieten DIDs vor allem die Möglichkeit der
sicheren kryptographischen Verifikation der Echtheit und
Authentitzität von Identifikationsschlüsseln.  Dies ist für viele
Anwendungen, z.B. im Bereich Smart Factory oder Authentifizierung von Maschinen, essentiell 
und kann heute komplett digital sichergestellt
werden, insofern eine entsprechende Vertrauensinfrastruktur zur
Verfügung steht. Die Relevanz wird in <<[[sec_eku]]>> nochmals verdeutlicht.

Relevante Vorteile des GS1 Systems gegenüber der DID sind
die Etablierung dieser Idente in der unternehmensübergreifenden
Kommunikation, für GS1 auch in Technologien wie Barcodes oder RFID
Tags, und die kontrollierte Vergabe dieser Idente. Über letztere kann
sichergestellt werden, dass ein minimaler Satz an verifizierten
Stammdaten vorliegt und vor allem, dass z.B. eine GLN auch
legitim vergeben wurden.



[[tab_compare]]
.Eigenschaften von Identifikatoren
[cols="^.<,^.<,^.<,^.<,^.<",options="header"]
|===
|
|DID
|UUID
|LEI
|GS1 IDs

|*Global eindeutig*
|icon:check[size=2x,role=green]
|icon:check[size=2x,role=green]
|icon:check[size=2x,role=green]
|icon:check[size=2x,role=green]

|*Unternehmensübergreifende Semantik*
|Per DID-Dokument
|icon:times[size=2x,role=red]
|icon:check[size=2x,role=green]
|icon:check[size=2x,role=green]

|*Stamm-/Metadaten online abrufbar*
|icon:check[size=2x,role=green]
|icon:times[size=2x,role=red]
|icon:check[size=2x,role=green]
|Falls veröffentlicht / freigegeben

|*Für verschiedene Subjekte einsetzbar*
|icon:check[size=2x,role=green]
|icon:check[size=2x,role=green]
|icon:times[size=2x,role=red]
|icon:check[size=2x,role=green]

|*Kryptographisch verifizierbar*
|icon:check[size=2x,role=green]
|icon:times[size=2x,role=red]
|icon:times[size=2x,role=red]
|icon:times[size=2x,role=red]

|*Anwender kann eigene IDs erstellen*
|icon:check[size=2x,role=green]
|icon:check[size=2x,role=green]
|icon:times[size=2x,role=red]
|icon:check[size=2x,role=green]

|*Verwendung in Auto-ID etabliert*
|icon:times[size=2x,role=red]
|icon:times[size=2x,role=red]
|icon:times[size=2x,role=red]
|icon:check[size=2x,role=green]

|*Etabliert in unternehmensübergreifender Kommunikation*
|icon:times[size=2x,role=red]
|icon:times[size=2x,role=red]
|icon:check[size=2x,role=green]
|icon:check[size=2x,role=green]

|*Kontrollierte Vergabe*
|icon:times[size=2x,role=red]
|icon:times[size=2x,role=red]
|icon:check[size=2x,role=green]
|icon:check[size=2x,role=green]

|===



Die Kombination eines GS1 Idents als Verifiable Credential einer DID
ergibt die einzigartige Möglichkeit, alle oben aufgeführten Vorteile
in einer Lösung zu kombinieren. 
So ensteht ein Identifikationsschlüssel der kryptografisch
abgesichert ist und zur sicheren digitalen Authentifizierung genutzt
werden kann. Gleichzeitig kann er aber auch für eine Vielzahl von Entitäten
mit einer unternehmensübergreifend verständlichen Semantik vergeben werden. 
Auch die Dezentralität bleibt erhalten, in
dem Sinne, dass GS1 Kunden selbst Identifikationsschlüssel _Certified
by GS1_ in ihrem Nummernkreis erzeugen und zertifizieren können. 
Zentral bleibt das System in dem Sinne, dass die GCP bei GS1 erworben
werden muss und in diesem Rahmen die Legitimitätsprüfung vorgenommen
und so die Sicherheit gewährleistet werden kann.


[[sec_gs1_anchor]]
== GS1 als Vertrauensanker

Das Vertrauen in Idente _Certified by GS1_ funktioniert konzeptionell
ähnlich wie bei klassischen Dokumenten. Auch wenn die entsprechenden
Ideen aus dem DID/SSI Umfeld kommen, ist das Trust-Modell unabhängig
von der Realisierung über DIDs oder klassische (zentrale) PKI
Zertifikatsketten.

=== Vertrauen in Ausweisdokumente

Das Vertrauen in die Identität einer Person kommt typischerweise durch
die Überprüfung eines fälschungssicheren Ausweisdokuments
("Authentifizierung") zustande. Hierbei vertraut der Prüfer zunächst
einer Autorität hinter dem Aussteller, z.B. dem Staat als Auftraggeber
der Bundesdruckerei. Diese bestätigt mit der Ausstellung des
Dokumentes, dass der Inhaber legitim ist. Gleichzeitig enthält das
Dokument die nötigen Eigenschaften, um seine eigene Echtheit
überprüfbar zu machen (Kopierschutzmaßnahmen im Dokument) und Merkmale
(z.B. Foto) zum Abgleich der Person mit dem Subjekt des Dokuments. So
wird das Vertrauen des Prüfers, wiederum indirekt, auf den Inhaber des
Dokuments übertragen und die Authentifizierung ist erfolgreich. Der
Prozess wird in <<physical-id>> dargestellt.

[[physical-id]]
.Das Vertrauen in klassische Ausweisdokumente beruht auf dem Vertrauen in die Authorität hinter der Zertifizierungsstelle(n), die korrekte Arbeit der Registrierungsstelle(n) und in die Regeln, die dem System zugrunde liegen. (Verwendung von Logos/Wappen als Referenz auf die Entitäten ohne deren Billigung der dargestellten Inhalte.)
image::Trust-in-classical-id.png[pdfwidth=75%,align="center"]


=== Certified By GS1 Trust Model

Bei der Identvergabe teilt GS1 einem Unternehmen mit der Basisnummer
(GS1 Company Prefix, GCP) einen Nummernkreis zu, in
welchem das Unternehmen dann selbst Idente vergeben kann. Parallel
hierzu ermöglicht ein Unternehmenszertifikat mit GCP _Certified By
GS1_ dem Unternehmen selbst Zertifikate für die eigenen Idente zu
erstellen. Diese grundlegende Idee ist in <<Chain>> dargestellt.

[[Chain]]
.Die Vertrauenswürdigkeit von Zertifikatsketten kann ausgehend vom Wurzelzertifikat automatisiert überprüft werden.
image::Certificate-Chain.png[]

Mit dem Unternehmenszertifikat kann die Echtheit der eigenen
Identifikationsnummern fälschungssicher nachgewiesen und offline
überprüft werden, d.h. es kann z.B. überprüft werden, dass eine SGTIN
tatsächlich von dem Unternehmen erzeugt wurde, dem die zugehörige
Basisnummer gehört, ohne das ein Online-Lookup in einer entsprechenden
Datenbank nötig wäre. Auch Eigenschaften des mit dem Ident
gekennzeichneten Assets können über die GS1 Standards, beispielsweise
in einen 2D Code wie der GS1 DataMatrix, kodiert und deren
Vertrauenswürdigkeit offline verifiziert werden. 
Dieses dient jedoch nicht als Kopierschutz für das Auto-ID Label. 
Wie eine Verfikation erfolgen kann, wird im Ablaufdiagram Kapitel <<sec_ssi_proto>> dargestellt.


Die abgeleiteten Zertifikate für serialisierte Idente sind besonders
im IoT Kontext interessant, da Maschinen sich mit einem solchen
Identifikationsschlüssel _Certified By GS1_ selbst ausweisen
und damit automatisiert authentifiziert werden könnten. Das bedeutet,
dass mittels etablierter kryptografischer Verfahren Maschinen sich
basierend auf dem _Certified by GS1_-System gegenseitig überprüfen und
so eine gesicherte Verbindung untereinander oder auch über das
Internet z.B. zu Cloud Diensten herstellen können, wie in
<<pic_IoT_auth>> dargestellt. Ein Vorteil des zertifikatsbasierten
Systems ist, dass es prinzipiell keiner direkten Verbindung zwischen
dem Überprüfer des zertifizierten Idents und GS1 bedarf. Wenn sich
also z.B. eine neue Maschine in einer Fabrik nur einseitig
authentifizieren muss, so muss der Fabrikbetreiber nicht GS1 Kunde
sein.


[[pic_IoT_auth]]
.Vertrauen in IDs certified by GS1 ermöglicht automatische M2M Authentifizierung und den Aufbau gesicherter Kommunikationskanäle. Hersteller erzeugen als Intermediäre dezentral ihre eigenen IDs und Zertifikate.
image::Parts-Certified-no-header.png[]

Basierend auf digital zertifizierten Identitäten kann, genau wie bei der
gängigen Verschlüsselung der Kommunikation über das Internet, ein gesicherter
Kommunikationskanal aufgebaut werden. So können z.B. Messdaten oder
Steuerbefehle übertragen werden, ohne dass diese von Dritten gefälscht werden
können.

=== Kundennutzen

Wie in <<sec_gs1_ids>> dargestellt, ermöglicht GS1 es einem Complete
Kunden auf Basis des zertifizierten GCP selbst Identifikationsnummern
in seinem Nummernkreis zu erzeugen.  Das _Certified by GS1_ Konzept,
das hier vorgestellt wird, sieht vor, dass der Inhaber eines
zertifizierten GCP entsprechend als Intermediär selbst nicht nur
Identifikationsschlüssel, sondern auch die zugehörigen Zertifikate
selbst erstellen kann. Für Unternehmen, die diese Unabhängigkeit
nicht benötigen, kann GS1 die Erstellung weiterer Certified IDs
natürlich auch als Service anbieten, wie z.B. bei One-Off Keys (bspw. GLN Typ 1).

Wie in <<sec_compare>> dargestellt führt gerade diese Dezentralität
des GS1 Systems kombiniert mit einer dezentralen digitalen und
kryptografisch abgesicherten Identifikationsplattform (wie SSI) zu einem
Identifikationsschlüssel mit einmaligen Merkmalen.

Gerade in Bereichen, in denen ein Unternehmen eine große Anzahl
zertifizierter Idente benötigt, oder verschiedene Dinge, Konzepte und
juristische Personen identifizieren möchte, wird genau ein solch
einmaliges System von Identen benötigt, wie es _Certified by GS1_ durch
die Kombination von SSI Technologie mit dem bestehenden GS1 System
bieten kann. Anwendungsfälle sind hier insbesondere, wie in
<<sec_use_cases>> ausführlich diskutiert, IoT Anwendungsszenarien,
aber auch Dokumente wie Voucher und Gutscheine oder die Zertifizierung
von Stammdaten.



=== Realisierung über X.509 im Vergleich zu Verifiable Credentials

Die in diesem Abschnitt verwendeten grundlegenden
Begriffe, insbesondere DIDs und Verifiable Credentials, werden in
<<sec_ssi>> eingeführt.

Im _Certified by GS1_ Projekt wurde die Zertifizierung der
Identifikationsschlüssel sowohl über klassische X.509
Zertifikatsketten prototypisch umgesetzt als auch über Verifiable
Credentials im Rahmen einer SSI Infrastruktur entwickelt. Beide
Ansätze ermöglichen die dezentrale Anwendung der Idente, ohne dass
nach der initialen Vergabe der zertifizierten GCP eine weitere
Interaktion mit GS1 notwendig ist.

Die Realisierung auf Basis von SSI Technologie bietet den großen
Vorteil der automatischen Interoperabilität mit den anderen im
gleichen Netzwerk realisierten Use Cases, so dass bei der 
Implementierung in einem oder mehreren Netzwerken
eine deutlich erleichterte Markteinführung und schnellere Verbreitung
zu erwarten ist.  Auch aus technischer Sicht ist das moderne und auf
flexiblen Schemata beruhende Konzept der Verifiable Credentials
attraktiver als das aus den 80ern stammende x.509 Zertifikatsformat,
das z.B. nicht als Datenformat für Stammdaten geeignet ist.


Das Konzept zur Zertifizierung von GS1 Identen und assoziierten
Stammdaten mittels SSI Technologie, welches im Rahmen des Projektes
bisher entwickelt wurde, stellt eine Arbeitsgrundlage zur weiteren
Abstimmung zwischen den GS1 Organisationen und den beteiligten Partnern dar. 

[[sec_ssi_proto]]
=== SSI Protokoll


In dem hier vorgestellten Protokoll haben nicht nur die beteiligten
Firmen, insbesondere GS1, eine eigene DID. Konkreten Dingen, etwa
serialisierte Handelswaren oder IoT Devices, und auch abstrakten
Konzepten, etwa einer Klasse von Waren oder Geräten, können gemäß
<<did-core>> DIDs zugeordnet werden.  Indem eine Klasse von
Gegenständen eine eigene DID erhält, etwa alle Sensoren einer bestimmten Baureihe eines
bestimmten Herstellers, können dieser Klasse
Eigenschaften als Verifiable Credentials (VC) attestiert
werden. Insbesondere kann der Hersteller die GTIN der Klasse und
Eigenschaften, die allen Instanzen gemein sind (d.h. Stammdaten), wie Größe, Gewicht,
Leistungsaufnahme, etc. als Verifiable Credentials veröffentlichen.

Besonders interessant wird der Anwendungsfall, wenn klassische
Zertifikate, etwa ein Bio Label für Lebensmittel oder Konformitätslabel 
für elektronische Geräte, ebensfalls von den Herausgebern der
Zertifikate als Verifiable Credentials direkt für die Produktklasse
ausgestellt werden können.

[[pic_ssi_gcp]]
.Ablaufdiagramm für das "On-Boarding" eines Unternehmens in das Certified System durch die Ausstellung einer GCP und optional der Zertifizierung von Stammdaten der (Party) GLN
image::certified-gs1-ids-1-GCP.png[pdfwidth=50%, align="center"]


Dem Hersteller, d.h. der DID der Firma, wird von GS1 ein Verifiable
Credential (VC) ausgestellt, das ihm eine GS1 Basisnummer
zuweist (siehe <<pic_ssi_gcp>>). Hiermit bestätigt GS1, dass diese Firma in der Tat GS1 Kunde
und damit berechtigt ist, Identifikationsnummern in einem gewissen
Nummernkreis (auf Basis dieses GCPs) zu vergeben. 

Eine erfolgreiche Überprüfung des GTIN VC und des GCP VC stellt sicher, dass die GTIN
vom Hersteller legitim vergeben wurde. Die Vertrauenswürdigkeit und
Integrität der direkt vom Hersteller beglaubigten Produkteigenschaften
sind als Verifiable Credentials überprüfbar.

[[pic_ssi_gtin]]
.Ablaufdiagramm für die Erstellung zertifizierter Identifikationsschlüssel und Stammdaten als Verifiable Credentials durch Kunden *ohne* Beteiligung von GS1
image::certified-gs1-ids-2-GTIN.png[pdfwidth=75%, align="center"]

Der DID einer konkreten Produktinstanz kann nun eine SGTIN als
serialisiertes Ident in Form eines VC zugewiesen werden. Wie in
<<pic_ssi_gtin>> dargestellt, wird die DID der zugehörigen GTIN als
Issuer verwendet, sodass die Kette der Idente von der GCP der Firma
über die GTIN der Produktklasse bis zur SGTIN der konkreten
Produktinstanz entsprechend als Kette von Verifiable Credentials, die
sich die DIDs ausstellen, abgebildet wird.



[[pic_ssi_verify]]
.Ablaufdiagramm der Verifikation der Zertifikatskette
image::certified-gs1-ids-3-Verification.png[]



[[sec_use_cases]]
== Anwendungsfälle

[[sec_verified_by_gs1]]
=== Validierung/ Verifizierung von Identen: Vermeidung von GTIN Missbrauch

==== Problemstellung

Die missbräuchliche Verwendung von GS1 Identen (wie z.B. GTIN) an sich ist u.A. für Online-Marktplätze ein Problem. Auf diesen Marktplätzen wird die GTIN als Ident genutzt, um verschiedene Angebote zu gleichen Artikeln zu aggregieren und die Echtheit der angebotenen Produkte sicherzustellen. Eine rein syntaktische Prüfung der Identifikationsnummern, auf z.B. korrekte Länge oder gültige Prüfziffer, kann jedoch einfach umgangen werden und es tauchen regelmäßig Angebotsduplikate unter gefälschten Artikelnummern auf.

==== Existierende Lösungsansätze

Ein Abgleich mit bei GS1 registrierten Artikelstammdaten über die
Online Services von GS1, wie GEPIR <<gepir>> bzw. den GTIN Manager
<<gtin-manager>> oder auch die Datenbank von GS1 Global (GS1 Registry)
über den Verified by GS1 <<verified-by-gs1>> Service, kann hier
Abhilfe schaffen. Eine solche Online-Abfrage stellt zum Einen sicher,
dass das Ident tatsächlich vom berechtigten GS1 Kunden vergeben wurde
und zum Anderen, dass die Artikelbeschreibung mit den hinterlegten
Stammdaten in Einklang steht. 
Artikelstammdaten können, z.B. über Atrify in einen weltweiten Verbund von Datenpools dem GDSN „Global Data Synchronization Network“, eingespielt werden. 
Dadurch können die Daten vom Einzel- und Onlinehandel, aber auch von Apps abgerufen werden. 
Diese Überprüfung ist aktuell, je nach
Service, im Batch per Datei upload, manuell per Web-UI und/oder
automatisiert per API möglich.

==== Verbesserungspotential durch _Certified by GS1_

Eine Überprüfung der Idente ist nur online möglich und die Korrektheit der Daten wird nur über das Vertrauen in die Transportverschlüsselung <<tls>> bei der Abfrage und die Identität des Servers, der die Daten bereit stellt, gesichert. Die Daten selbst sind in den aktuellen Konzepten nicht authentifiziert und es gibt keinen direkten Link zum Herausgeber.

Die Umsetzung von _Certified by GS1_ versetzt den Basisnummerninhaber in die Lage selbst Zertifikate für die von ihm erstellten Idente und Stammdaten zu signieren. Diese können über beliebige Kanäle weitergegeben werden, wie bisher über zentrale Repositories, aber auch direkt an die relevanten Partner, ohne dass Dritte Einsicht erhalten oder ein zentraler Angriffspunkt entsteht.  Die Gültigkeit der Zertifikatskette, basierend auf dem Vertrauensanker (Zertifikat) von GS1, kann uneingeschränkt und offline überprüft werden.

Durch die digitale Signatur und die entsprechenden Zertifikate wird vor allem die Integrität der Daten unabhängig vom Übertragungskanal sichergestellt. Der Überprüfer kann somit darauf vertrauen, dass ein Ident vom authorisierten Basisnummerninhaber vergeben wurde und damit ein legitimes GS1 Ident ist. Eine direkte Signatur der Stammdaten durch den legitimen Herausgeber bietet bestmöglichen Schutz vor beabsichtigter oder unbeabsichtigter Veränderung der Daten auf dem Weg zum Empfänger und ermöglicht so eine sichere dezentrale Kommunikation.



[[sec_onboarding]]
=== Validierung/ Verifizierung von Unternehmen: Sichere Handelsbeziehungen

==== Problemstellung

Vertrauenswürdige Daten zu Unternehmen sind für digitale
Handelsbeziehungen ebenso wichtig, wie die vertrauenswürdige
Authentifizierung realer Personen und ihrer Daten im Online-Handel,
oder - allgemeiner - bei digitalen Vertragsabschlüssen. Entsprechend
einem digitalen Ident, mit ähnlicher Vertrauenswürdigkeit wie dem
Personalausweis, benötigt ein Unternehmen möglicherweise einen digital
beglaubigten Handelsregisterauszug um sich zu authentifizieren und die
Legitimität eines Rechtsgeschäfts zu beweisen.

Ein konkreter Use Case basierend auf Unternehmensstammdaten ist das
Supplier Onboarding. Will ein Hersteller einen neuen Zulieferer in
seine Systeme aufnehmen, so ist dies je nach Industriezweig
typischerweise mit erheblichem Aufwand verbunden, worunter die
Flexibilität der Handelsbeziehungen leidet. Während für bestimmte
Hersteller spezifische Audits möglicherweise unumgänglich und
gewünscht sind, ließe sich ein erheblicher Teil der papierbasierten
Prüfung von Unternehmensdaten, Zulassungen und klassischen
standardisierten Zertifizierungen, auf Basis einer
Vertrauensinfrastruktur digitalisieren und automatisieren.

==== Existierende Lösungsansätze

Gerade im Bereich des Supplier Onboardings gibt es Platformen, die als
Intermediär anbieten die Unternehmensstammdaten
sicher/vertrauenswürdig zu verwalten und beim Onboarding an den neuen
Kunden weiterzugeben. Die marktwirtschaftlichen Nachteile solcher
Platformen, die über kurz oder lang durch Netzwerkeffekte entweder ein
Monopol entwickeln oder aussterben, sind hinreichend bekannt.


==== Verbesserungspotential durch _Certified by GS1_

Bei der Vergabe eines GS1 Company Prefix (GCP) und damit eines
Nummernkreises an ein Unternehmen, vergibt GS1 auch eine (Party) GLN
zur Identifikation des Unternehmens selbst und erfasst Daten zum
Unternehmen wie Name, Rechtsform, Hauptsitz, u.a.

Basierend auf einer kritischen Überprüfung der vom Unternehmen
angegebenen Daten kann GS1 die Echtheit solcher
Unternehmensstammdaten zertifizieren. Die Vorlage vertrauenswürdig
zertifizierter Daten erspart den Vertragspartnern dieses Unternehmens
künftig, diese Überprüfung selbst durchführen zu müssen und ermöglicht
so schneller und einfacher mit dem Unternehmen in eine Rechtsbeziehung
zu treten.

In einem analogen Prozess könnten auch andere Stammdaten zertifiziert
und bestehende Zertifikate (etwa basierend auf der Einhaltung
relevanter Normen) digitalisiert werden.


[[sec_eku]]
=== Industrie 4.0: Konfiguration und Regelung von vernetzten Maschinen

[[EKU-PD]]
==== Interaktive Demonstration

Um den in diesem Abschnitt vorgestellten Use Case anschaulich und
leicht verständlich darzustellen, wurde eine interaktive
Online-Demonstration des Use Cases entwickelt. Die in diesem Abschnitt
gezeigten Bilder, stammen aus diesem Demonstrator. Die Demonstration
ist unter <<online-demo>> öffentlich zugänglich.

In diesem Zusammenhang möchten wir uns besonders bei Kristian Binder
und seinen Kollegen von EKU Power Drives bedanken, die uns mit Ihrer
Expertise zur Seite gestanden haben. EKU Power Drives haben ihren Use
Case sehr ausführlich erläutert und mit uns zum heutigen Stand
entwickelt. 


==== Hintergrund

EKU Power Drives entwickelt gemeinsam mit seinen Kunden intelligente
Automatisierungslösungen, mit deren Hilfe energieintensive technische
Prozesse effizienter gestaltet werden können. Die Ressourcen werden
gezielt für den eigentlichen Prozess eingesetzt und der
Ressourceneinsatz für nicht prozessrelevante Vorgänge wird
weitestgehend eliminiert. Dabei liegt der Fokus auf ortsveränderlichen
bzw. mobilen Anlagen. Also Systeme, die nicht an einem festen Ort
installiert arbeiten, sondern bei denen regelmäßige Standortwechsel
und Rekonfiguration zum normalen Betrieb gehören.

Eine der wesentlichen Herausforderungen in diesen Systemen ist die ständige Anpassung an veränderte Umgebungsbedingungen. Zeitintensive, manuelle Konfigurationsarbeit muss hierbei durch den konsequenten Einsatz von intelligenter, vernetzter Automatisierungstechnik vermieden werden, um die Akzeptanz und Praxistauglichkeit der Systeme nicht zu gefährden. Der Betrieb eines solchen Microgrids bringt allerdings einige Herausforderungen mit sich. Da die Zahl der daran angebundenen Anlagen im Vergleich zum
öffentlichen Stromnetz überschaubar ist, haben Laständerungen einzelner Teilsysteme einen deutlich stärkeren Einfluss auf die Stabilität des Gesamtsystems. Um Ausfälle oder gar Schäden an den beteiligten Komponenten zu vermeiden, müssen alle Stromerzeuger und Verbraucher ihre Leistungsregelung auf einen stabilen Zustand des Microgrids auslegen. Dafür wird ein mehrstufiges Reglerkonzept eingesetzt.


[[eku-init]]
.Einführungstext der interaktiven Demonstration des Use Case
image::demo-screenshots/1-intro.png[pdfwidth=75%,align="center"]

====  Statische Informationen
Alle an das Microgrid angeschlossenen Anlagen haben wesentliche technische Eigenschaften, welche die Anlage charakterisieren. Dies können z.B. Hersteller, Modell, Nennleistung, zulässiger Leistungsbereich, Nennspannung, zulässiger Spannungsbereich, usw. sein.

Alle diese Eigenschaften werden vom Hersteller der Anlage
angegeben. Sie werden sich über ihre Lebensdauer hinweg nicht
verändern und wenn, dann ist diese Veränderung ebenso
vorhersehbar. Üblicherweise werden derartige Angaben vom Hersteller
auf einem Typenschild zusammengefasst. Ein digitales Typenschild dient
im aktuellem Anwendungsfall als Datenbasis, um Maschinen passend zu
den aktuellen dynamischen Anforderungen anzumieten (siehe <<eku-static>>).

[[eku-static]]
.In der Demo wird die Nutzung statischer Daten, konkret eines digitalen Typenschildes, dargestellt
image::demo-screenshots/2-rental.png[pdfwidth=75%,align="center"]

Werden Anlagen, wie im aktuellen Beispiel, dynamisch aus gemieteten
Maschinen zusammengestellt, so ist die Korrektheit des digitalen
Typenschildes essentiell für die Funktion der
Gesamtanlage. Absichtlich oder unabsichtlich eingebrachte Fehler oder
Ungenauigkeiten können im schlimmsten Fall den Ausfall der gesamten
Anlage nach sich ziehen (siehe <<eku-static-hacked>>).

[[eku-static-hacked]]
.Der Problemfall manipulierter statischer Daten wird ebenfalls aufgezeigt
image::demo-screenshots/3-outage.png[pdfwidth=75%,align="center"]



[[sec_eku-dynamic]]
==== Dynamische Informationen

Neben den statischen Informationen über die Anlage entstehen während
ihres Betriebs weitere Daten, die für andere Teilnehmer im Netzwerk
interessant sein können. So z.B. aktuelle Leistungsaufnahme / -Abgabe,
ggf. vorhergesehene Leistungsaufnahme im nächsten Zeitschritt,
Verschleißanzeige, Fehlerzustände oder Zeit bis zur nächsten Wartung.
Diese Informationen verändern sich - abhängig von der jeweiligen
Anwendung - z.B. im Bereich von einigen 10ms (siehe <<eku-dynamic>>).

[[eku-dynamic]]
.Die Nutzung dynamischer Daten wird als Use Case präsentiert
image::demo-screenshots/5-dynamic.png[pdfwidth=75%,align="center"]

Fälschung der dynamischen Daten im laufenden Betrieb durch einen Cyber-Angriff 
auf die Anlage kann ähnlich fatale Folgen haben, wie falsche
statische Daten (siehe <<eku-dynamic-hacked>>).

[[eku-dynamic-hacked]]
.Manipulierte Daten werden problematisiert
image::demo-screenshots/6-hacked.png[pdfwidth=75%,align="center"]


==== Verbesserungspotential durch _Certified by GS1_
=====  Statische Daten
Das digitale Typenschild, das alle für die Anlage technisch relevanten Informationen enthält, kann vom Hersteller mittels einer elektronischen Signatur beglaubigt werden. Es kann nicht verändert werden, ohne Kenntnis des privaten Schlüssels des Herstellers. Analog zum SSL Zertifikat im WWW, das die Echtheit einer besuchten Webseite z.B. für Onlinebanking bestätigt, kann das elektronische Typenschild technisch relevante Informationen vor Veränderung schützen. Durch geeignete Mittel (z.B. dynamische oder challenge/response Inhalte) kann das digitale Typenschild (in Verbindung mit entsprechend gesicherter Elektronik) außerdem als Schutz gegen Plagiate eingesetzt werden.

[[eku-certified]]
.Vom Hersteller signierte digitale Typenschilder können nicht manipuliert werden und das in <<eku-static-hacked>> dargestellte Angriffszenario wird verhindert
image::demo-screenshots/4-certified-dtls.png[pdfwidth=75%,align="center"]

===== Dynamische Daten
Um das Einschleusen von unerwünschter / schädlicher Informationen in die verteilten Regelsysteme zu vermeiden, kann ein am Prozess beteiligtes Steuergerät seine komplette Kommunikation elektronisch signieren. Somit kann die Echtheit der Informationen bei den Empfängern verifiziert werden. Fortlaufende Sequenznummern innerhalb der signierten Daten vereiteln außerdem Replay-Attacken.

[[eku-certified-dynamic]]
.Signierte dynamische Daten können auch in einer unsicheren Umgebung fälschungssicher übertragen werden und der in <<eku-dynamic-hacked>> dargestellte Angriff wird verhindert
image::demo-screenshots/7-certified-dynamic.png[pdfwidth=75%,align="center"]

===== Pay per Use
Großes Potential, insbesondere in Bezug auf Nachhaltigkeit, haben moderne Businessmodelle, in denen nicht mehr die Geräte oder Maschinen verkauft oder auf Zeit verliehen
werden, sondern der Nutzen, den der Anwender durch diese erzielt, direkt bepreist wird. In solchen "Pay per Use" oder "as a Service" Modellen werden alle nötigen Voraussetzungen, wie Maschinen und Betriebsmittel, die der Nutzer braucht um den gewünschten Nutzen zu erzielen, zur Verfügung gestellt. Wichtig ist bei den zugrundelegenden Business Modellen immer, eine präzise und vor allem eine für alle beteiligten vertrauenswürdige Messung der Parameter (KPIs), auf denen die Berechnung der Kosten eines solchen Service beruht.

Aufgrund der eingesetzten Sensorik und automatisierten Datenübertragung und Abwicklung, ggf. bis in die Abrechnung, handelt es sich hier um IoT Use Cases, die ein hohes Maß an Sicherheit verlangen um eine Chance auf Akzeptanz am Markt zu haben. Dieser Use Case kann als ein Spezialfall der in <<sec_eku-dynamic>> thematisierten Übertragung dynamischer Daten in einem allgemeineren Kontext gesehen werden. Haben die zur Berechnung der KPIs eingesetzten Sensoren, z.B. Watt-Meter zur Messung der vom Generator erzeugten Leistung, eine _Certified by GS1_ ID, so kann der entsprechende auf dem Gerät hinterlegte private Schlüssel zur Signatur der Daten genutzt werden. 
Die Überprüfung der korrekten Funktion des Sensors, etwa durch eine zertifizierte Eichung, kann ebenfalls über an die Certified ID gebundenen digitalen Zertifikate abgebildet werden. Auf diese Art und Weise werden die Daten eines Sensors manipulationssicher und vertrauenswürdig und können als Berechnungsgrundlage für den Preis in einem Pay per Use Modell dienen.

[[eku-pay-per-use]]
.Auch der Pay per Use Anwendungsfall wird in der Demo thematisiert
image::demo-screenshots/8-pay-per-use.png[pdfwidth=75%,align="center"]





[[sec_conclusion]]
== Fazit

Im Projekt _Certified by GS1_ wurde aufgezeigt, wie GS1
Identifikationsschlüssel und Stammdaten durch Zertifikate erweitert
werden können, um das bestehende unternehmens- und
branchenübergreifende System authentifizierbar zu machen.  Durch die
Vergabe digitaler Zertifikate, welche direkt beweisen, dass die
zertifizierten Identifikationsnummern gültig sind und korrekt nach den
Regeln des GS1 Systems erzeugt wurden, kann GS1 als vertrauenswürdige
und neutrale Organisation zum Vertrauensanker einer Infrastruktur
werden, in der Firmen auch Stammdaten direkt mit dem jeweiligen
Identifikationsschlüssel sichern und vertrauenswürdig signieren
können.

Der einzigartige Vorteil der _Certified by GS1_ Lösung im Vergleich zu ähnlichen
Entwicklungen ist, dass die Kunden von GS1 als
Intermediäre selbst zertifizierte Identifikationsschlüssel erstellen
können und so die volle Hoheit über ihre Idente und Zertifikate
behalten, ähnlich wie dies bereits heute der Regelfall für GS1
Identifikationsnummern ist. Auf diese Art und Weise bleibt das GS1
System dezentral und Hersteller, die einmal eine zertifizierte GCP
erworben haben, können die entsprechende Anzahl von
z.B. zertifizierten GTINs vergeben, ohne jede einzelne zentral
registrieren zu müssen.


Besonders interessant ist dies im IoT Bereich, in dem die Erzeugung
der Identifikationsschlüssel (z.B. SGTINs) in den Herstellungsprozess
integriert werden kann, sodass sich die Geräte auf Basis der
_Certified by GS1_ Vertrauensinfrastruktur sicher authentifizieren und
die Echtheit der von ihnen versendeten (Mess-)Daten beweisen können.
In Recherchen und Interviews im Projektverlauf wurde klar
festgestellt, dass dieser Baustein zur interoperablen Absicherung
heute im (I)IoT fehlt, aber zumindest mittelfristig, insbesondere zur Realisierung
der Industrie 4.0 Zukunftszenarien, dringend benötigt wird. 

Als weiteres Ergebnis des Projektes hat sich klar herausgestellt, dass
von GS1 *zertifizierte Stammdaten* und die *digitale beglaubigung
bestehender Zertifikate* großes Potential haben. GS1 könnte
z.B. gewisse Unternehmensstammdaten überprüfen und die
Vertrauenswürdigkeit der überprüften Daten anschließend digital
bescheinigen. Auf Basis der erhöhten Vertrauenswürdigkeit solcher
Stammdaten oder auch klassischer Zertifikate, die von GS1 überprüft
und digital signiert wurden, lassen sich viele Prozesse vereinfachen,
da die Prüfung im folgenden digital und automatisiert erfolgen
kann. Ein konkretes Beispiel wurde in <<sec_onboarding>> dargestellt.


Allein die Übertragung der bestehenden Identifikationsnummern in die
SSI Welt stellt eine natürliche Weiterentwicklung des etablierten
Systems der GS1 Identifikationssschlüssel dar und sichert die
Zukunftsfähigkeit dieser Idente, gerade im IoT Zeitalter. Gleiches
gilt für die Zertifizierung von Stammdaten, für deren
vertrauenswürdige Bereitstellung GS1 und die Tochterunternehmen
aktuell bereits Services anbietet, ohne jedoch bisher digitale
Zertifikate anzubieten.



Neutralität und Vertrauenswürdigkeit der Registrierungsstelle sind für
das Funktionieren einer jeden Vertrauensinfrastruktur absolut
notwendig. Für das GS1 System ist GS1 selbst der natürliche
Vertrauensanker um diese Funktion zu erfüllen.


=== Fazit aus der Kundenbefragung

Die im Rahmen des Projektes durchgeführten Umfragen per Fragebogen und
direkten Interviews zeichnen ein klares Bild des aktuellen Stands der
Umsetzung von Industrie 4.0 Konzepten und Ideen bei den befragten
Partnern im Industrie 4.0 Umfeld. Cloud-Lösungen und offene Netzwerke
im Sinne eines echten _Internet_ of Things nehmen bei den befragten
Unternehmen und deren Kunden aktuell noch keinen großen Stellenwert
ein. Lokale Netzwerke werden bevorzugt und Standards zur
unternehmensübergreifenden Kommunikation, werden zwar in
der Regel angeboten, aber selten nachgefragt.  Es wurde trotzdem
allgemein die Relevanz von unternehmensübergreifend eindeutigen und
vor allem sicheren Identifikationsnummern für Maschinen
bestätigt. Bisher arbeitet der Maschinenbau im wesentlichen mit
proprietären Identen und war nicht gezwungen sich mit der Thematik
auseinander zu setzen. Im Ausblick sehen alle Befragten aber die
Wichtigkeit der digitalen Idente und Zertifikate und sprechen sich für
die _Certified by GS1_ Idee aus. Eine einfache Integration in bestehende
Herstellungsprozesse und Anwendungen wird hierbei als essentiell für
die industrielle Anwendung gesehen.

In einzelnen konkreten Use Cases, in denen eine regelmäßige oder gar
kontinuierliche dynamische Umkonfiguration des Maschinenparks erfolgt,
ist der Bedarf heute schon akuter und eine baldige Umsetzung
denkbar. Für ein konkretes Anwendungsbeispiel sei auf <<sec_eku>> verwiesen.





=== Umsetzung

Wie in <<sec_pki>> erläutert, ist das Ausstellen von
Authentifizierungsmerkmalen eine essentielle aber auch kritische
Funktion in jeder Vertrauensinfrastruktur. GS1 muss hier zur
Ausstellung von Identifikationsschlüsseln _Certified by GS1_
einen neuen Prozess etablieren, um sicherzustellen, dass die DID, der
eine GCP zugeordnet wird, wirklich dem entsprechenden Unternehmen
gehört. Das richtige Sicherheitsniveau ist hier noch zu definieren.
Denkbar wären viele Varianten, von einer schriftlichen
Benachrichtigung des Unternehmens um Gelegenheit zum Einspruch zu
geben, über eine Vertragsunterzeichnung bis hin zu telefonischer oder
gar persönlicher Rücksprache mit entsprechend berechtigten Personen. Diese
Details sind mit Partnern zu erarbeiten und im Business Modell zu
berücksichtigen.


Die in <<sec_ssi>> näher erläuterte, auf *SSI Technologie* basierende
dezentrale Vertrauensinfrastruktur befindet sich aktuell in einem für
Anwender höchst interessanten Entwicklungsstadium. Die technologischen
Grundlagen sind größtenteils entwickelt und in ersten Großprojekten
(namentlich Sovrin <<sovrin>>) produktiv erprobt worden. Das Thema
wurde von der Politik als relevant erkannt und die Entwicklung wird
zur Zeit auf breiter Front gefördert. Besonders interessant ist die
Entwicklung in Europa: bei
der zentralen PKI Infrastruktur wurde die Chance verpasst, wichtige
Vertrauensinfrastrukturkomponenten rechtzeitig selbst
aufzubauen. Dementsprechend beschäftigen sich aktuell eine Vielzahl
von Projekten und Konsortien in verschiedenen technologischen und
wirtschaftlichen Reifegraden mit dem Aufbau einer dezantralen
Infrastruktur. Wie in <<sec_ssi_proto>> dargestellt
ist SSI Technologie zur Implementierung der hier
vorgestellten Ideen geeignet. Insbesondere bieten _Verifiable
Credentials_ eine sehr gute Möglichkeit, die oben angesprochene
Dezentralität des Identifikationsschlüssel-Systems _Certified by GS1_ zu
realisieren.

Durch die eIDAS Verordnung der Europäischen Union, der Verordnung über elektronische Identifizierung und Vertrauensdienste, 
wurde ein kompatibler europäischer Rahmen für die selbstsouveräne Identität geschaffen. 
Das sogenannte European Self-Sovereign Identity Framework (ESSIF) 
verwendet dezentrale Idente (DIDs) und die European Blockchain Services Infrastructure(EBSI). 




=== Ausblick

In diesem Projekt stand die konzeptionelle und technische Entwicklung
der _Certified by GS1_ Ideen im Vordergrund, welche in Absprache und
unter Einbeziehung möglichst vieler interessierter Partner erfolgte.
Auf dem Weg zu einem MVP sind noch wichtige Schritte zu gehen. In der
Rolle als Vermittler von Interessen sucht GS1 hierzu weitere Partner,
um eine Lösung basierend auf einem möglichst breiten Konsens zu
entwickeln. Wenn Sie diese spannenden Themen gemeinsam mit uns weiter
entwickeln möchten, wenden Sie sich gerne für Informationen zum
aktuellen Stand an die Autoren!


Um durch die Implementierung von
Identifikationsschlüsseln _Certified by GS1_ mittels SSI Technologie die
technische Grundlage für konkrete prototypische Anwendungen zu schaffen, werden sich GS1 und das EECC in zwei Konsortien um Förderung in der aktuellen Ausschreibung des Bundesministeriums für Wirtschaft
und Energie (BMWi) mit dem Titel
https://www.digitale-technologien.de/DT/Navigation/DE/ProgrammeProjekte/AktuelleTechnologieprogramme/Sichere_Digitale_Identitaeten/sichere_digitale_ident.html[Schaufenster Sichere Digitale Identitäten]
bewerben.
Die Beteiligung an zwei Konsortien mit verschiedenen inhaltlichen
Schwerpunkten und Use Cases in verschiedenen Branchen bietet die
Möglichkeit, die Interoperabilität der entwickelten Lösung über die
Grenzen eines konkreten SSI Netzwerkes hinaus sicherzustellen, wie sie
von einem GS1 Standard zu erwarten ist.


Das 
https://www.digitale-technologien.de/DT/Redaktion/DE/Standardartikel/SchaufensterSichereDigIdentProjekte/sdi-projekt_ssi.html[Self Sovereign Identity für Deutschland]
Konsortium hat neben Personen- auch Firmenidentifikation und Dinge im
IoT Sinn im
Blick. Während viele SSI Umsetzungen allein auf Personen fokussieren,
liegt gerade in der Anwendung der Technologie zur sicheren
Identifizierung und Authentifizierung von juristischen Personen und
Dingen, insbesondere im IoT Kontext, eine große Chance für GS1. Hier
ist die Technologie in hinreichendem Reifegrad verfügbar und es sind
noch keine starken Konkurrenten am Markt etabliert.

Im
https://www.digitale-technologien.de/DT/Redaktion/DE/Standardartikel/SchaufensterSichereDigIdentProjekte/sdi-projekt_id-ideal.html[ID-Ideal]
Konsortium der Schaufensterregion um die Hochschule Mittweida sollen
insbesondere auf SSI Technologie basierende Businessmodelle im Bereich
der Datenökonomie entwickelt werden.
Die Weiterentwicklung bestehender Treuekarten und Punktesysteme
mittels SSI Technologie ermöglicht es Kundendaten in einer Detailtiefe
und Qualität zu erschließen, wie dies sonst nur im Onlinehandel
möglich ist. Gleichzeitig bietet die SSI Technologie die Möglichkeit
den Kunden ihre Datenhoheit zurückzugeben und sie fair und transparent
am Geschäft mit den eigenen Daten zu beteiligen. Die etablierten
Identifikationsnummern von GS1 im Handel werden hierbei eine wichtige Rolle spielen.


Auf Basis der in den Forschungsprojekten auszuarbeitenden
grundlegenden Infrastruktur an sicheren Certified Identifikationsschlüsseln können eine
Vielzahl von Use Cases innerhalb der Förderprojekte und darüber hinaus
umgesetzt werden, insbesondere die in <<sec_use_cases>> vorgestellten.



:!sectnums:





[bibliography]
== Literaturverzeichnis/Quellenangaben

- [[[acatech]]] Wandlungsfähige, menschzentrierte Strukturen in Fabriken und Netzwerken der Industrie 4.0 (acatech Studie), München: Herbert Utz Verlage 2018. https://www.plattform-i40.de/PI40/Redaktion/DE/Downloads/Publikation/hm-2018-fb-wandlung.html
- [[[auth]]] https://de.wikipedia.org/wiki/Authentifizierung
- [[[ca]]] https://de.wikipedia.org/wiki/Zertifizierungsstelle vor allem aber https://en.wikipedia.org/wiki/Certificate_authority
- [[[did-core]]] Decentralized Identifiers (DIDs) v1.0 https://www.w3.org/TR/did-core/
- [[[gen-spec]]] https://www.gs1.org/standards/barcodes-epcrfid-id-keys/gs1-general-specifications
- [[[gepir]]] https://www.gs1-germany.de/gepir-datenbank/ ( https://www.gepir.de/ )
- [[[gs1-prefix]]]  https://www.gs1.org/standards/id-keys/company-prefix
- [[[gtin-manager]]] https://www.gs1-germany.de/serviceverzeichnis/gtin-manager/
- [[[gen-specs]]] https://www.gs1.org/standards/barcodes-epcrfid-id-keys/gs1-general-specifications/
- [[[idp]]] https://en.wikipedia.org/wiki/Identity_provider
- [[[online-demo]]]  https://gs1-germany-innolab.github.io/eku-pd-certified-by-gs1-demo/
- [[[pgp-cert]]] https://de.wikipedia.org/wiki/OpenPGP#Aufbau_der_Zertifikate
- [[[pki]]] https://de.wikipedia.org/wiki/Public-Key-Infrastruktur
- [[[rfc-2141]]] IETF RFC 2141 https://tools.ietf.org/html/rfc2141
- [[[rfc-4122]]] Open Software Foundation und IETF RFC 4122 https://www.rfc-editor.org/info/rfc4122
- [[[rfc-8141]]] RFC 8141 https://www.rfc-editor.org/info/rfc8141
- [[[sign]]] https://de.wikipedia.org/wiki/Digitale_Signatur ,  https://en.wikipedia.org/wiki/Digital_signature , https://en.wikipedia.org/wiki/RSA_(cryptosystem)
- [[[sovrin]]] https://sovrin.org/
- [[[ssi]]] https://hpd.de/artikel/self-sovereign-identities-helfen-internet-reparieren-17150
- [[[ssi-am]]] https://digitaleweltmagazin.de/2019/08/12/chancen-der-self-sovereign-identities-ssi-aus-sicht-von-unternehmen-fuer-das-identity-access-management-iam/
- [[[ssi-zukunft]]] https://www.validatedid.com/de/self-sovereign-identity-die-zukunft-steht-vor-der-tuer/ 
- [[[ssi-bitkom]]] https://www.bitkom.org/Bitkom/Publikationen/Self-Sovereign-Identity-Use-Cases
- [[[szenarien-i40]]] Fortschreibung der Anwendungsszenarien der Plattform Industrie 4.0 https://www.plattform-i40.de/PI40/Redaktion/DE/Downloads/Publikation/fortschreibung-anwendungsszenarien.html
- [[[tls]]] https://de.wikipedia.org/wiki/Transport_Layer_Security
- [[[trust-over-ip]]] https://trustoverip.org/
- [[[vc-data-model]]] Verifiable Credentials Data Model 1.0 https://www.w3.org/TR/vc-data-model/
- [[[vdma-i40]]] Leitfaden Industrie 4.0 (VDMA - Forum Industrie 4.0) https://industrie40.vdma.org/viewer/-/v2article/render/15540546
- [[[verified-by-gs1]]] https://www.gs1-germany.de/serviceverzeichnis/verified-by-gs1/
- [[[x509]]] https://de.wikipedia.org/wiki/X.509

[glossary]
== Glossar

[glossary]
Zertifikat:: Ein vom Aussteller digital unterschriebenes Dokument, was einer Entität (Subjekt) gewisse Eigenschaften bescheinigt, siehe <<sec_certs>>.

Certified by GS1::
        Wird sowohl als Name des abgeschlossenen F&E Projekts als auch für die entwickelten Konzepte verwende.

rain::
        water falling from the sky
        
